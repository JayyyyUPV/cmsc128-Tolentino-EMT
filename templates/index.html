<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>To Do List</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

  <h1>To do or Not To Do</h1>
  <p>By: EJ Tolentino</p>
  <div style="text-align:center; margin-bottom:18px;">
    <a href="/profile" style="color:#7fd7e0; font-weight:bold; text-decoration:none;">Profile</a>
  </div>

  <div class="container">
    <div class="top-bar">
      <div>
        <label>
          Sort by:
          <select id="sortBy">
            <option value="createdAt">Date Added</option>
            <option value="dueDate">Due Date</option>
            <option value="priority">Priority</option>
          </select>
        </label>
        <label>
          List:
          <select id="listSelect"></select>
        </label>
      </div>
      <div>
        <button class="btn" id="createListBtn" title="Create collaborative list">New List</button>
        <button class="btn" id="shareListBtn" title="Manage sharing for current list" disabled>Share</button>
        <button class="add-btn" id="openModalBtn">+ Add Task</button>
      </div>
    </div>

    <div class="show-completed">
      <label>
        <input type="checkbox" id="showCompleted">
        Show Completed Tasks
      </label>
    </div>

    <ul id="taskList"></ul>
  </div>

  <div id="taskModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeModalBtn">&times;</span>
      <h2>Add New Task</h2>
      <form id="taskForm">
        <input type="text" id="title" placeholder="Task title" required>
        <textarea id="description" placeholder="Description" rows="4"></textarea>
        <div class="form-row">
          <input type="date" id="dueDate" required>
          <input type="time" id="dueTime" required>
        </div>
        <select id="priority">
          <option value="Low">Low</option>
          <option value="Mid">Mid</option>
          <option value="High">High</option>
        </select>
        <button type="submit">Add Task</button>
      </form>
    </div>
  </div>

  
  <div class="toast" id="toast">Task deleted <button id="undoBtn">Undo</button></div>

  <!-- Custom Alert Modal -->
<div id="customAlert" class="custom-modal" style="display:none;">
  <div class="custom-modal-content">
    <span id="customAlertMsg"></span>
    <div class="custom-modal-actions">
      <button id="customAlertOk" class="btn">OK</button>
      <button id="customAlertCancel" class="btn" style="display:none;">Cancel</button>
    </div>
  </div>
</div>

  <!-- Share Modal -->
  <div id="shareModal" class="modal">
    <div class="modal-content" style="max-width: 480px;">
      <span class="close" id="closeShareModal">&times;</span>
      <h2 id="shareModalTitle">List</h2>
      <div class="share-section">
        <h3 style="margin:12px 0 6px;">Members</h3>
        <ul id="shareMembers" class="share-members"></ul>
        <p id="shareEmpty" style="color:#bdbdbd; display:none;">No members yet.</p>
      </div>
      <form id="shareForm" class="share-form">
        <label for="shareUsername">Add user by username</label>
        <div class="form-row">
          <input type="text" id="shareUsername" placeholder="username" required>
          <button type="submit" class="btn btn--primary">Add</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Create List Modal -->
  <div id="createListModal" class="modal">
    <div class="modal-content" style="max-width: 420px;">
      <span class="close" id="closeCreateListModal">&times;</span>
      <h2>Create List</h2>
      <form id="createListForm" class="share-form">
        <label for="createListName">List name</label>
        <div class="form-row">
          <input type="text" id="createListName" placeholder="e.g., Team Tasks" required>
          <button type="submit" class="btn btn--primary">Create</button>
        </div>
      </form>
    </div>
  </div>

<script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
